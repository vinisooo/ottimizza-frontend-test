<div cdkDrag class="flex h-full w-72 shrink-0 flex-col rounded-lg border border-border bg-muted/50">
  <div class="flex items-center justify-between p-3 border-b border-border">
    <div class="flex items-center gap-1">
      <i
        z-icon
        zType="grip-vertical"
        class="size-4 cursor-grab text-muted-foreground"
        cdkDragHandle
      ></i>
      <h3 class="text-sm font-semibold">{{ column().name }}</h3>
    </div>
    <div class="flex items-center gap-0.5">
      <span class="text-xs text-muted-foreground mr-1">{{ tasks().length }}</span>
      <z-button-group>
        <app-kanban-task-create [columnId]="column().id" [taskCount]="tasks().length" />
        <app-kanban-column-edit [column]="column()" />
        <app-kanban-column-delete [column]="column()" />
      </z-button-group>
    </div>
  </div>

  <div
    cdkDropList
    [cdkDropListData]="tasks()"
    [cdkDropListConnectedTo]="connectedTo()"
    [id]="column().id"
    (cdkDropListDropped)="onDrop($event)"
    class="flex min-h-24 flex-1 flex-col gap-2 overflow-y-auto p-2"
  >
    @for (task of tasks(); track task.id) {
      <app-kanban-task [task]="task" [columnId]="column().id" />
    }
  </div>
</div>
